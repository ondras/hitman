<!doctype html>
<html>
	<head>
		<link rel="stylesheet" href="tm/tm.css" />
	</head>

	<body>
		<input type="range" min="0" max="5000" />

		<section data-skin="plain">
		</div>

		<button>GO</button>

		<style>
			body {
				display: flex;
				flex-direction: column;
				align-items: center;
			}
		</style>


	<script type="module">
	import {runtime, dom, rules, util} from "./tm/tm.js";

	const parent = document.querySelector("section");

	let rulesNode = dom.createRules(4);
	rules.fillBusyBeaver(rulesNode);
	let machineNode = dom.createMachine();
	let tapeNode = dom.createTape();

	let append = parent.appendChild.bind(parent);
	[rulesNode, machineNode, tapeNode].forEach(append);

	document.querySelector("button").addEventListener("click", e => {
		runtime.loop(machineNode, tapeNode, rulesNode);
	});

	util.bindInputAndProperty(
		document.querySelector("[type=range]"),
		document.body,
		dom.TRANSITION
	);
	</script>
	</body>
</html>
